<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>火星车控制面板</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* 全局 Reset & 布局 */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: sans-serif;
      background: #eef2f5;
      padding: 1rem;
      display: block;
    }
    .card {
      background: #fff;
      border-radius: 0.75rem;
      box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.1);
      padding: 1rem;
      width: 100%;
      max-width: 360px;
      margin: 0 auto 1rem;
    }
    h2 {
      font-size: 1.25rem;
      margin-bottom: 0.75rem;
      text-align: center;
      border-bottom: 2px solid #ddd;
      padding-bottom: 0.5rem;
    }
    /* 底盘按钮 */
    .controls {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-template-rows:    1fr 1fr 1fr;
      gap: 1rem;
      width: 100%;
      max-width: 300px;
      margin: 0 auto 1rem;
    }
    .controls button {
      width: 70%;
      height: 100%;
      aspect-ratio: 1 / 1;
      font-size: 1.5rem;
      border: none;
      border-radius: 0.5rem;
      background: #007bff;
      color: #fff;
      cursor: pointer;
    }
    .controls .stop { background: #dc3545; }
    .controls .up    { grid-column: 2; grid-row: 1; }
    .controls .left  { grid-column: 1; grid-row: 2; }
    .controls .stop  { grid-column: 2; grid-row: 2; }
    .controls .right { grid-column: 3; grid-row: 2; }
    .controls .down  { grid-column: 2; grid-row: 3; }
    /* 机械臂按钮 */
    .arm-controls { display: flex; flex-direction: column; gap: 0.75rem; }
    .joint-control { display: flex; justify-content: space-between; }
    .joint-control button {
      flex: 1;
      margin: 0 0.25rem;
      padding: 0.75rem;
      font-size: 1rem;
      border: none;
      border-radius: 0.5rem;
      background: #28a745;
      color: #fff;
      cursor: pointer;
    }
    .joint-control span { flex: 1; text-align: center; line-height: 2.5rem; }
  </style>
</head>
<body>
  <!-- 底盘控制 -->
  <div class="card">
    <h2>底盘控制</h2>
    <div class="controls">
      <button class="up">↑</button>
      <button class="down">↓</button>
      <button class="left">←</button>
      <button class="right">→</button>
      <button class="stop">■</button>
    </div>
  </div>

  <!-- 机械臂控制 -->
  <div class="card">
    <h2>机械臂控制</h2>
    <div class="arm-controls">
      <!-- 关节1 -->
      <div class="joint-control" data-joint="1">
        <button class="left">←</button>
        <span>关节1</span>
        <button class="right">→</button>
      </div>
      <!-- 关节2 -->
      <div class="joint-control" data-joint="2">
        <button class="left">←</button>
        <span>关节2</span>
        <button class="right">→</button>
      </div>
      <!-- 关节3 -->
      <div class="joint-control" data-joint="3">
        <button class="left">←</button>
        <span>关节3</span>
        <button class="right">→</button>
      </div>
      <!-- 关节4 -->
      <div class="joint-control" data-joint="4">
        <button class="left">←</button>
        <span>关节4</span>
        <button class="right">→</button>
      </div>
    </div>
  </div>

  <script>
    // 底盘控制
    document.querySelectorAll('.controls button').forEach(btn => {
      btn.onclick = () => {
        let dir = 'stop';
        if (btn.classList.contains('up'))    dir='up';
        if (btn.classList.contains('down'))  dir='down';
        if (btn.classList.contains('left'))  dir='left';
        if (btn.classList.contains('right')) dir='right';
        fetch(`/chassis?direction=${dir}`)
          .then(r=>r.text()).then(t=>console.log('chassis→',t));
      };
    });

    // 机械臂控制按钮
    document.querySelectorAll('.joint-control').forEach(div=>{
      const joint = div.getAttribute('data-joint');
      div.querySelectorAll('button').forEach(btn=>{
        btn.onclick = () => {
          const dir = btn.classList.contains('left') ? 'left' : 'right';
          fetch(`/arm?joint=${joint}&direction=${dir}`)
            .then(r=>r.text()).then(t=>console.log(`arm${joint}→`, t));
        };
      });
    });
  </script>
</body>
</html>